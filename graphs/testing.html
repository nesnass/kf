<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <title>Pack layout (with padding)</title>
</head>

<style>
circle {
  fill: indianred;
  opacity: 0.3;
  stroke: white;
}

#a2 {
      position: absolute;
      right: 50%;
      top: 0;
}

#a3 {
      position: absolute;
      right: 50%;
      top: 50%;
}
</style>

<body>
  <svg id="a1" width="100" height="100">
    <g></g>
  </svg>

  <svg id="a2" width="100" height="100">
            <g></g>
          </svg>

  <svg id="a3" width="100" height="100">
                  <g></g>
                </svg>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>
  <script src="leader-line.js"></script>
  <script>


 
/* const getData = await getPythonData;
console.log(getData); */

const getPythonData = () => {
  fetch("http://localhost:3000/script/topicModelling", {
        method: "post",
        headers: {
          "Content-Type": "application/json; charset=utf-8"
        },
        body: JSON.stringify({
          text1: "The first text",
          text2: "A second text"
        })
      }).then(response => response.json()).then(data => {
        popuplateGraph(data);
      })
}


var data = {
  "name": "ThemeA",
  "children": [
        {
          "name": "C1",
          "value": 100
        },
        {
          "name": "C2",
          "value": 100
        },
        {
          "name": "C3",
          "value": 100
        }
  ]
};

var packLayout = d3.pack()
  .size([100, 100])
  .padding(10)

var rootNode = d3.hierarchy(data)

rootNode.sum(function(d) {
  return d.value;
});

packLayout(rootNode);
getPythonData();
const popuplateGraph = (data) => {
  
  const topics = data.topics;
  const coordinates = data.prepared_data;
  let arrayJson = [];
  for(i = 0; i < coordinates.topics.length; i++){
    arrayJson.push({
      "name": "Theme"+i,
      "children": [],
    });
  }

  let json = {};
  for (var key in topics.Topic) {
        console.log(key + " -> " + topics.Topic[key]);
       /*  arrayJson[topics.Topic[key]] */
 }
/*   for(i = 0; i < topics.Topic.length; i++){
    console.log(topics.Topic[i]);
  } */
  console.log(arrayJson);
}
/* d3.select('#a1 g')
  .selectAll('circle')
  .data(rootNode.descendants())
  .enter()
  .append('circle')
  .attr('class', 'testing')
  .attr('cx', function(d) { return d.x; })
  .attr('cy', function(d) { return d.y; })
  .attr('r', function(d) { return d.r; })

d3.select('#a2 g')
  .selectAll('circle')
  .data(rootNode.descendants())
  .enter()
  .append('circle')
  .attr('cx', function(d) { return d.x; })
  .attr('cy', function(d) { return d.y; })
  .attr('r', function(d) { return d.r; })

d3.select('#a3 g')
  .selectAll('circle')
  .data(rootNode.descendants())
  .enter()
  .append('circle')
  .attr('cx', function(d) { return d.x; })
  .attr('cy', function(d) { return d.y; })
  .attr('r', function(d) { return d.r; })


  var myLine = new LeaderLine(
    document.getElementById('a1'),
    document.getElementById('a2'),{
  startPlug: 'disc',
  endPlug: 'disc'
});

 var myLine2 = new LeaderLine(
    document.getElementById('a1'),
    document.getElementById('a3'),{
      startPlug: 'disc',
      endPlug: 'disc'
      }
); */

  </script>
</body>
</html>